<form @onsubmit="HandleSubmit" @onsubmit:preventDefault
    class="bg-white/10 backdrop-blur-md ring-1 ring-white/10 rounded-xl p-2 shadow-lg">
    <div class="flex items-end gap-2">
        <textarea @bind="MessageText" @bind:event="oninput"
            class="w-full bg-transparent text-white/90 placeholder-white/60 resize-none outline-none text-sm leading-6 p-2 min-h-10 max-h-40"
            placeholder="Type a message..." rows="1" data-autosize data-chat-input></textarea>

        <button data-ias-send type="submit" aria-label="Send" title="Send"
            class="shrink-0 inline-flex items-center justify-center h-10 w-10 rounded-lg bg-sky-500 hover:bg-sky-400 text-white ring-1 ring-white/20 shadow-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors">
            <i class="fa-solid fa-paper-plane"></i>
        </button>
    </div>
</form>

@code {
    [Parameter]
    public EventCallback<string> OnSend { get; set; }

    private string? MessageText { get; set; }
    // no JS interop fields needed; app.js uses delegated listeners

    private async Task HandleSubmit()
    {
        if (!string.IsNullOrWhiteSpace(MessageText))
        {
            await OnSend.InvokeAsync(MessageText);
            MessageText = string.Empty;
            // autosize will reset via JS listeners
        }
    }

    // Enter-to-send handled via app.js
}
